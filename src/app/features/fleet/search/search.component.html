<h2>Tra cứu Xe</h2>

<form (ngSubmit)="search()" #searchForm="ngForm">
  <div class="grid">
    <input placeholder="ID" type="number" [(ngModel)]="request.id" name="id">
    <input placeholder="Mã xe" [(ngModel)]="request.vehicleCode" name="vehicleCode">
    <input placeholder="Biển số" [(ngModel)]="request.licensePlate" name="licensePlate">
    <input placeholder="Hãng" [(ngModel)]="request.brand" name="brand">
    <input placeholder="Mẫu xe" [(ngModel)]="request.model" name="model">
    <input placeholder="Loại xe" [(ngModel)]="request.vehicleType" name="vehicleType">
    <input placeholder="Số ghế" type="number" [(ngModel)]="request.seats" name="seats">
    <input placeholder="Hộp số" [(ngModel)]="request.transmission" name="transmission">
    <input placeholder="Nhiên liệu" [(ngModel)]="request.fuelType" name="fuelType">
    <input placeholder="Màu sắc" [(ngModel)]="request.color" name="color">
    <input placeholder="Năm sản xuất" type="number" [(ngModel)]="request.year" name="year">
    <input placeholder="Giá cơ bản" type="number" step="0.01" [(ngModel)]="request.basePrice" name="basePrice">
    <input placeholder="Trạng thái" [(ngModel)]="request.status" name="status">
    <input placeholder="Chi nhánh ID" type="number" [(ngModel)]="request.branchId" name="branchId">
    <input placeholder="Thời gian quay đầu (phút)" type="number" [(ngModel)]="request.turnaroundMinutes" name="turnaroundMinutes">
  </div>

  <button type="submit" [disabled]="loading">
    {{ loading ? 'Đang tìm...' : 'Tìm kiếm' }}
  </button>
</form>

<div class="result" *ngIf="vehicles.length > 0">
  <table>
    <thead>
      <tr>
        <th *ngFor="let col of displayedColumns">{{ col }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let v of vehicles">
        <td *ngFor="let col of displayedColumns">{{ v[col] }}</td>
      </tr>
    </tbody>
  </table>
</div>

<p *ngIf="!loading && vehicles.length === 0 && searchForm.submitted">
  Không tìm thấy xe nào.
</p>

<style>
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin: 20px 0; }
  input { width: 100%; padding: 8px; }
  button { padding: 10px 20px; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background: #f4f4f4; }
</style>