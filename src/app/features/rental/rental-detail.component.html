<!-- rental-detail.component.html -->
<div class="detail-container">
  <h2>{{ title }} #{{ rental?.transactionCode }}</h2>

  <div class="actions">
    <!-- Chỉ Admin ở chế độ view mới thấy nút Cập nhật -->
    <button *ngIf="canEdit" (click)="enterEdit()" class="btn-edit">
      Cập nhật
    </button>

    <!-- Chỉ hiện khi đang edit (chỉ admin) -->
    <button *ngIf="showActions" (click)="cancel()" class="btn-cancel">
      Hủy
    </button>
    <button *ngIf="showActions" (click)="save()" [disabled]="isSubmitting" class="btn-save">
      {{ isSubmitting ? 'Đang lưu...' : 'Lưu thay đổi' }}
    </button>

    <button (click)="location.back()" class="btn-back">Quay lại</button>
  </div>

  <form [formGroup]="form" class="rental-form">
    <div class="form-row">
      <label>ID:</label>
      <input type="text" formControlName="id" readonly>
    </div>

    <div class="form-row">
      <label>Mã giao dịch:</label>
      <input type="text" formControlName="transactionCode" readonly>
    </div>

    <div class="form-row">
      <label>Khách hàng ID:</label>
      <input type="text" formControlName="userId" readonly>
    </div>

    <div class="form-row">
      <label>Xe ID:</label>
      <input type="text" formControlName="vehicleId" readonly>
    </div>

    <div class="form-row">
      <label>Trạng thái:</label>
      <select formControlName="status" [attr.disabled]="!isAdmin || mode === 'view' ? true : null">
        <option value="PENDING">Chờ xác nhận</option>
        <option value="CONFIRMED">Đã xác nhận</option>
        <option value="CANCELLED">Đã hủy</option>
        <option value="COMPLETED">Hoàn thành</option>
      </select>
    </div>

    <div class="form-row">
      <label>Thời gian nhận xe:</label>
      <input type="datetime-local" formControlName="pickupTime">
    </div>

    <div class="form-row">
      <label>Thời gian trả xe:</label>
      <input type="datetime-local" formControlName="returnTime">
    </div>

    <div class="form-row">
      <label>Tổng tiền:</label>
      <input type="number" formControlName="totalAmount">
      <span>{{ form.get('currency')?.value }}</span>
    </div>
  </form>

  <!-- Thông báo cho khách hàng -->
  <div *ngIf="isCustomer" class="customer-notice">
    Bạn chỉ có thể xem thông tin đơn thuê. Liên hệ admin nếu cần hỗ trợ.
  </div>
</div>